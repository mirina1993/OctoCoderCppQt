packet=[0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 1 0 0 0 0 0 0 0 0 0 1 0 1 1 1 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];

%convolution encoder
tr1=poly2trellis(9,[753 561]);
convcode=convenc(packet,tr1); 
%interleaver
 INTERLEAVER = [ 0,  17,  34,  51,  68,  85, 104, 121, 138, 155, 172, 189,  16,  33,  50,  67,
    84, 101, 120, 137, 154, 171, 188,  13,  32,  49,  66,  83, 100, 117, 136, 153,
    170, 187,  12,  29,  48,  65,  82,  99, 116, 133, 152, 169, 186,  11,  28,  45,
    64,  81,  98, 115, 132, 149, 168, 185,  10,  27,  44,  61,  80,  97, 114, 131,
    148, 165, 184,   9,  26,  43,  60,  77,  96, 113, 130, 147, 164, 181,   8,  25,
    42,  59,  76,  93, 112, 129, 146, 163, 180,   5,  24,  41,  58,  75,  92, 109,
    128, 145, 162, 179,   4,  21,  40,  57,  74,  91, 108, 125, 144, 161, 178,   3,
    20,  37,  56,  73,  90, 107, 124, 141, 160, 177,   2,  19,  36,  53,  72,  89,
    106, 123, 140, 157, 176,   1,  18,  35,  52,  69,  88, 105, 122, 139, 156, 173];

interleaver=reshape(INTERLEAVER,[1 144]);
sig = sortrows([convcode int],2);


